## multi
#if ( $source.InstanceOf == "Setting" && $source.InstanceOf.DeclaredInPackage == "ecore.EStructuralFeature" && $targetRoleName == "Value")
#set( $return = $imports.addToImports( "org.eclipse.emf.common.util.EList" ) )
#set( $return = $imports.addToImports( "java.util.Collections" ) )
#set( $list = "${sourceName}.getEStructuralFeature().isMany() ? (EList<Object>)${sourceName}.get(true) : Collections.singletonList(${sourceName}.get(true))" )
#else
#set( $list = "${sourceName}.get$targetRoleName ()" )
#end
#if ( $targetMulti.ContainerObject.equals($source) )
#set( $targetMultiName = $targetMulti.SourceObject.ObjectName )
#if ( $targetMulti.Type == 2 )## DIRECT
#set( $mparam = "${list}.indexOf ($targetMultiName) + 1" )
#set( $multi = "NextOf" )
#elseif ( $targetMulti.Type == 3 )## INDEX
#set( $mparam = "${list}.indexOf ($targetMultiName) + $targetMulti.Index" )
#set( $multi = "NextOf" )
#elseif ( $targetMulti.Type == 4 )## INDIRECT
#set( $indmulti = "${list}.indexOf ($targetMultiName) < ${list}.indexOf ($targetMulti.TargetObject.ObjectName)" )
#end
#elseif ( $sourceMulti.ContainerObject.equals($source) )
#set( $sourceMultiName = $sourceMulti.TargetObject.ObjectName )
#if ( $sourceMulti.Type == 2 )## DIRECT
#set( $mparam = "${list}.indexOf ($sourceMultiName) - 1" )
#set( $multi = "PreviousOf" )
#elseif ( $sourceMulti.Type == 3 )## INDEX
#set( $mparam = "${list}.indexOf ($sourceMultiName) - $sourceMulti.Index" )
#set( $multi = "PreviousOf" )
#elseif ( $sourceMulti.Type == 4 )## INDIRECT
#set( $indmulti = "${list}.indexOf ($sourceMultiName) > ${list}.indexOf ($sourceMulti.SourceObject.ObjectName)" )
#end	
#end
### TypeOf[ ${multiLink} ] := de.uni_paderborn.fujaba.uml.behavior.UMLMultiLink
#set( $multiLink = $link )
#set( $linkNegative = $multiLink.isNegative() )
## copied from check.vm
// check multi link
if (!( ##
#if ( $linkNegative )!(#end
#parse("$!{style}storyPattern/link/linkcheck.vm" )
#if ( $targetNegative ))#end
 )) {throw new Exception("SDMException");};

