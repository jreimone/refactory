<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE project [<!ENTITY buildfile SYSTEM "file:./build-example-plugins.xml">]>

<!-- Script that extends Reuseware application plugins with an example an a wizard to
     create a new project from the example -->

<project basedir="." default="generate-examples" name="Reuseware Example Projects">
	<property file="local.build.properties"/>
	<property name="plugins.vendor" value="Software Technology Group - TU Dresden Germany" />
	<property name="plugins.namepre" value="" />
    <property name="plugins.namepost" value="" />

	<macrodef name="buildexampleplugin" >
	    <attribute name="wizardproject"/>
	    <attribute name="examplepackage"/>
	    <attribute name="exampleproject"/>
		<attribute name="title"/>
		<attribute name="description"/>
		
	    <sequential>
	    	<!-- Create the wizard -->
	    	<copy file="ExampleUnzipperNewWizard.java.template" 
	    		tofile="../@{wizardproject}/src-example/@{examplepackage}/ExampleUnzipperNewWizard.java"/>
	    	<replace file="../@{wizardproject}/src-example/@{examplepackage}/ExampleUnzipperNewWizard.java"
	    		token="PAGE_TITLE" value="@{title}"/>
	    	<replace file="../@{wizardproject}/src-example/@{examplepackage}/ExampleUnzipperNewWizard.java"
	    		token="PAGE_DESCRIPTION" value="@{description}"/>
	    	<replace file="../@{wizardproject}/src-example/@{examplepackage}/ExampleUnzipperNewWizard.java"
	    		token="PROJECT_NAME" value="@{exampleproject}"/>
	    	<replace file="../@{wizardproject}/src-example/@{examplepackage}/ExampleUnzipperNewWizard.java"
	    		token="PLUGIN_ID" value="@{wizardproject}"/>	    			
	    	<!--- Create the example zip file -->
	    	<zip destfile="../@{wizardproject}/example.zip">
	    		<fileset dir="../@{exampleproject}" excludes="**/.svn"/>	
	    	</zip>
	    	
	    	<eclipse.refreshLocal depth="infinite" resource="@{wizardproject}"/>
	    </sequential>
	</macrodef>

	
	<target name="generate-examples">
		<buildexampleplugin 
			exampleproject="org.modelplex.cim.tidlibrary"
			examplepackage="org/modelplex/cim/tidlibrary"
			wizardproject="org.reuseware.application.cim"
			title="MODELPLEX Project CIM Library"
			description="A library of CIM (Common Information Model) components that was developed in the Modelplex project."/>
		
		<buildexampleplugin 
			exampleproject="org.reuseware.application.taipan.example.taosd"
			examplepackage="org/reuseware/application/taipan/example/taosd"
			wizardproject="org.reuseware.application.taipan"
			title="TaiPan Composition Example"
			description="The example used in the Paper 'On Language-Independent Model Modularisation' published in Transactions on Aspect-Oriented Software Development VI (Springer, LNCS)."/>

		<buildexampleplugin 
			exampleproject="org.reuseware.application.classweaving"
			examplepackage="org/reuseware/application/classweaving"
			wizardproject="org.reuseware.application.classweaving.plugin"
			title="Class Weaving (UML/Ecore/Java)"
			description="This composition system demonstrates how Reuseware can be used for Aspect-Oriented Software Development (AOSD) by adding class weaving support to three different langueg (UML, Ecore, and Java)."/>

		<buildexampleplugin 
			exampleproject="org.reuseware.application.cbse.exercise"
			examplepackage="org/reuseware/application/cbse/exercise"
			wizardproject="org.reuseware.application.cbse"
			title="CBSE Exercise (UML)"
			description="An exercise that was developed for students of the Component-Based Software Engineering (CBSE) course at TU Dresden. The exercise explores the development of composition systems with Reuseware on the example of UML Class Diagrams and UML State Machines. The exercise sheet is included in the example project."/>

		<buildexampleplugin 
			exampleproject="org.reuseware.application.swt2.exercise"
			examplepackage="org/reuseware/application/swt2/exercise"
			wizardproject="org.reuseware.application.swt2"
			title="SWT2 Exercise (UML)"
			description="An exercise that was developed for students of the Softwaretechnology II (SWT2) course at TU Dresden. The exercise explores the usage of Reuseware composition systems on the example of a composition system for UML Class Diagrams and UML State Machines. The exercise sheet is included in the example project."/>
		
	</target>
				
</project>
